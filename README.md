# QyNat

基于netty的内网穿透工具

适用场景：外网无法访问内网，内网可以访问外网

如本地调试项目，可穿透外网，供他人访问

protocol协议：[protobuf](https://developers.google.cn/protocol-buffers?hl=zh-cn)

![](https://tva1.sinaimg.cn/large/008i3skNgy1gsj4ansxx5j30zp0u00vu.jpg)

##内网穿透的原理

​	对于内网来说，其不是不能主动访问公网端口，而是不能反过来有效的被公网访问。内网穿透的主要思路就是利用这一点，让在内网的节点主动访问一个拥有公网IP地址的服务器，并由中间服务器搭桥，打通经过该服务器从其他主机到NAT之后节点的隧道。

​	端口映射是 NAT 的一种，它将外网主机的 IP 地址的一个端口映射到内网中一台机器，提供相应的服务。当用户访问该 IP 的这个端口时，服务器自动将请求映射到对应局域网内部的机器上。通过一些中转技术，让内网“假装”成外网，这就平常所说的内网穿透。

##NAT技术

​	NAT技术(Network Address Translation，网络地址转换)是通过将专用的网络地址转换为公用地址，从而对外隐藏了内部管理的IP地址。这样，通过在内部使用非注册的IP地址，并将它们转换为一小部分外部注册的IP地址，从而减少了IP地址注册的费用以及节省了越来越缺乏的地址空间。同时，这也隐藏了内部网络结构，从而降低了内部网络受到攻击的风险。NAT的功能就是在内部网络的私有地址需要与外部通信时,把内部私有地址转换成合法的全局IP地址。NAT可以在两个方向上隐藏地址，为了支持这种方案，NAT在两个方向上都要翻译原地址和目的地址。NAT的功能通常被集成到路由器、防火墙等设备中。NAT设备维护一个映射表，用它来实现全局到本地和本地到全局的地址转换。
NAT有三种类型：静态NAT(StaticNAT)、动态地址NAT(PooledNAT)、网络地址端口转换NAPT（Port-LevelNAT）。



##SOCKET介绍

​	套接字（socket）是一个抽象层，应用程序可以通过它发送或接收数据，可对其进行像对文件一样的打开、读写和关闭等操作。套接字允许应用程序将I/O插入到网络中，并与网络中的其他应用程序进行通信。网络套接字是IP地址与端口的组合(ip+port)。